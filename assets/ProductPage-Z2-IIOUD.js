import{r as e,j as s}from"./react-BZuymhSV.js";import{U as t,d as r,f as a,P as i,a as n,L as c}from"./index-D5g7XqCc.js";import{u as l,a as o}from"./react-router-dom-BFbt_rfn.js";import{S as d,b as m,a as u}from"./swiper-bSAY_IpK.js";import{d as p,p as j}from"./react-icons-BdjcCHud.js";/* empty css                */import"./react-dom-BYiVop1z.js";import"./scheduler-DhxmCZ7v.js";import"./@gsap-7rUOfEg6.js";import"./gsap-BDVyzZVq.js";import"./i18next-BuDUpmuK.js";import"./split-type-CbOXNKxF.js";import"./axios-XtWrBBVz.js";import"./react-i18next-DjQM30kD.js";import"./react-toastify-BQnkcPH4.js";import"./clsx-BeLtu-UY.js";import"./@remix-run-CmyMgbGZ.js";const x="_product-page_1x4mj_5",_="_product-details_1x4mj_27",h="_landing_1x4mj_32",g="_discount_1x4mj_41",f="_cover-wrapper_1x4mj_47",b="_cover_1x4mj_47",y="_info-wrapper_1x4mj_61",N="_title_1x4mj_68",v="_price_1x4mj_71",w="_artists_1x4mj_74",k="_artist_1x4mj_74",S="_released_1x4mj_90",P="_controls_1x4mj_94",C="_button_1x4mj_102",I="_header_1x4mj_119",$="_spotify-iframe_1x4mj_124",q="_iframe-container_1x4mj_129",A="_iframe-placeholder_1x4mj_138",E="_iframe-warning_1x4mj_153",T=({url:a,title:i,price:n,artists:c,discount:o,quantity:d,_id:m,releaseDate:u})=>{const[p,j]=e.useState(!1),{addAlbumToCart:x}=e.useContext(t),_=r(o,n),I=l();return s.jsxs("div",{className:h,children:[s.jsx("div",{className:f,children:s.jsx("img",{src:a,alt:"Cover image",className:b})}),s.jsxs("div",{className:y,children:[s.jsx("h1",{className:N,children:i}),s.jsxs("p",{className:v,children:[_||n.toFixed(2)," PLN",o>0&&s.jsxs("span",{className:g,children:["FROM ",n.toFixed(2)," PLN"]})]}),s.jsx("p",{className:w,children:c.map(((e,t)=>((e,t)=>s.jsxs("span",{className:k,onClick:()=>I(`/catalog?page=1&inputQuery=${e}`,{replace:!0}),children:[e,t!==c.length-1&&", "]},(Math.random()+1).toString(36).substring(7)))(e,t)))}),s.jsx("p",{className:S,children:`Released: ${u.split("T")[0]}`}),s.jsxs("div",{className:P,children:[s.jsx("button",{className:C,disabled:0===d||p,onClick:async()=>{j(!0),await x({id:m,quantity:1}),I("/cart")},children:"Buy Now"}),s.jsx("button",{className:C,disabled:0===d||p,onClick:async()=>{j(!0),await x({id:m,quantity:1}),j(!1)},children:"To Cart"})]})]})]})},V=({genres:t})=>{const[r,n]=e.useState([]);return e.useEffect((()=>{a({genres:t},1).then((e=>{if(e.error)return;const s=window.location.pathname.split("/").pop();e.products=e.products.filter((e=>e._id!==s)),n(e.products)}))}),[t]),s.jsxs("div",{className:"similar-wrapper",children:[s.jsx("h1",{className:I,children:"Similar:"}),s.jsx(d,{spaceBetween:15,scrollbar:{draggable:!0},modules:[m],className:"mySwiper",initialSlide:1,breakpoints:{300:{slidesPerView:2},480:{slidesPerView:3},660:{slidesPerView:4},768:{slidesPerView:3},1140:{slidesPerView:4},1512:{slidesPerView:5}},children:r.map((e=>s.jsx(u,{children:s.jsx(i,{product:e,customClass:"similar-product-style"},e._id)},e._id)))})]})},D=({spotifyAlbumId:t})=>{const[r,a]=e.useState(!1),[i,n]=e.useState(!0);e.useEffect((()=>{a(!1)}),[t]);return s.jsxs("div",{className:$,children:[s.jsx("h1",{className:I,children:"Track list:"}),s.jsxs("div",{className:q,children:[s.jsx("iframe",{style:{display:""+(r?"block":"none")},src:`https://open.spotify.com/embed/album/${t}`,width:"100%",height:"550",allow:"encrypted-media",onLoad:()=>a(!0)},t),(()=>{if(i&&r)return s.jsxs("div",{className:E,children:[s.jsx(j,{}),s.jsx("span",{children:"Warning! The Spotify player does not have a built-in volume control. Please lower the browser volume in your system."}),s.jsx("button",{onClick:()=>n(!1),className:"btn-1",children:"Understand"})]})})(),(()=>{if(!r)return s.jsxs("div",{className:A,children:[s.jsx(p,{}),s.jsx("span",{children:"Fetching..."})]})})()]})]})},F={"genres-list":"_genres-list_1vvc3_1","button-container":"_button-container_1vvc3_8","genre-button":"_genre-button_1vvc3_13"},L=({genres:e})=>{const t=l();return s.jsxs("div",{className:F["genres-list"],children:[s.jsx("h1",{className:F.header,children:"Genres list:"}),s.jsx("div",{className:F["button-container"],children:e.map((e=>s.jsx("button",{className:F["genre-button"],onClick:()=>(e=>t(`/catalog?1&genres%5B%5D=${e}`))(e),children:e},e)))})]})},B=({productInfo:t})=>{const{images:r,title:a,price:i,discount:n,genres:c,artists:l,spotifyAlbumId:o,_id:d,quantity:m,releaseDate:u}=t;return e.useEffect((()=>{window.scrollTo(0,0)}),[]),e.useEffect((()=>{const e=document.querySelector("body");return e.style.backgroundImage=`url(${r.large.url})`,e.style.backgroundSize="cover",e.style.backgroundPosition="center",e.style.backgroundAttachment="fixed",()=>{e.style.backgroundImage="",e.style.backgroundSize="",e.style.backgroundPosition="",e.style.backgroundAttachment=""}}),[r]),s.jsxs("div",{className:x,style:{backgroundImage:`url(${r.large.url})`},children:[s.jsx(T,{url:r.large.url,title:a,price:i,artists:l,discount:n,_id:d,quantity:m,releaseDate:u}),s.jsxs("div",{className:_,children:[s.jsx(L,{genres:c}),s.jsx(D,{spotifyAlbumId:o}),s.jsx(V,{genres:c})]})]})},z=()=>{const[t,r]=e.useState(null),[a,i]=e.useState("fetching"),l=o();return e.useEffect((()=>{const e=window.location.pathname.split("/").pop(),s=sessionStorage.getItem(`product_${e}`);s?(r(JSON.parse(s)),i("fetched")):n([e]).then((e=>{e.error?i("error"):(r(e[0]),i("fetched"))}))}),[l]),"fetching"===a?s.jsx(c,{}):"error"===a?s.jsx("div",{className:"info-div",children:"Error fetching product info"}):t?s.jsx(B,{productInfo:t}):s.jsx("div",{className:"info-div",children:"No product info"})};export{z as default};
