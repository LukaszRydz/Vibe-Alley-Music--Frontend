import{r as e,j as s}from"./react-BZuymhSV.js";import{U as r,l as t,b as a,C as n,r as i,c as o,o as l}from"./index-DtGRj1F_.js";import{b as m,d as u,e as h}from"./validators-BtMPgszA.js";import{u as c}from"./react-router-dom-BFbt_rfn.js";import"./react-dom-BYiVop1z.js";import"./scheduler-DhxmCZ7v.js";import"./@gsap-7rUOfEg6.js";import"./gsap-BDVyzZVq.js";import"./i18next-BuDUpmuK.js";import"./split-type-CbOXNKxF.js";import"./axios-XtWrBBVz.js";import"./react-i18next-DjQM30kD.js";import"./react-icons-BdjcCHud.js";import"./swiper-bSAY_IpK.js";import"./react-toastify-BQnkcPH4.js";import"./clsx-BeLtu-UY.js";import"./@remix-run-CmyMgbGZ.js";const d={auth:"_auth_ghy9c_1","auth-form":"_auth-form_ghy9c_12",header:"_header_ghy9c_24","input-group":"_input-group_ghy9c_27","shop-key-input__btn":"_shop-key-input__btn_ghy9c_46","submit-button":"_submit-button_ghy9c_52","auth-link":"_auth-link_ghy9c_72"},p=()=>{const{setUser:i,setCart:o}=e.useContext(r),[l,h]=e.useState(""),[c,p]=e.useState(""),[g,j]=e.useState(""),x=t("Auth.SignInForm")();return s.jsxs("form",{className:d["auth-form"],onSubmit:e=>{e.preventDefault(),a(l,c).then((e=>{e.error?j(e.error):(i(e),n.mergeCarts(n.getLocalStorage(),e.cart).then((e=>o(e))))}))},children:[s.jsx("h2",{className:d.header,children:x("header")}),g.length>0&&s.jsx("div",{className:d["error-message"],children:g}),s.jsxs("div",{className:d["input-group"],children:[s.jsxs("label",{htmlFor:"email",children:[x("email"),":"]}),s.jsx("input",{type:"email",id:"email",name:"email",onChange:e=>h(e.target.value),autoComplete:"email"}),l.length>0&&!m(l)&&s.jsx("div",{className:d["error-message"],children:x("emailError")})]}),s.jsxs("div",{className:d["input-group"],children:[s.jsxs("label",{htmlFor:"password",children:[x("password"),":"]}),s.jsx("input",{type:"password",id:"password",name:"password",onChange:e=>p(e.target.value),autoComplete:"current-password"}),c.length>0&&s.jsx("div",{className:d["error-message"],children:u(c)})]}),s.jsx("button",{type:"submit",className:d["submit-button"],children:x("btnSubmit")})]})},g=({setCurrentForm:r})=>{const[a,n]=e.useState(""),[o,l]=e.useState(""),[h,c]=e.useState(""),[p,g]=e.useState(""),j=t("Auth.RegisterForm")();return s.jsxs("form",{className:d["auth-form"],onSubmit:e=>{e.preventDefault(),i(a,o,h).then((e=>{e.error?g(e.error):r("signIn")}))},children:[s.jsx("h2",{className:d.header,children:j("header")}),p.length>0&&s.jsx("div",{className:d["error-message"],children:p}),s.jsxs("div",{className:d["input-group"],children:[s.jsxs("label",{htmlFor:"email",children:[j("email"),":"]}),s.jsx("input",{type:"email",id:"email",name:"email",onChange:e=>n(e.target.value),autoComplete:"email"}),a.length>0&&!m(a)&&s.jsx("div",{className:d["error-message"],children:j("emailError")})]}),s.jsxs("div",{className:d["input-group"],children:[s.jsxs("label",{htmlFor:"password",children:[j("password"),":"]}),s.jsx("input",{type:"password",id:"password",name:"password",onChange:e=>l(e.target.value),autoComplete:"new-password"}),o.length>0&&s.jsx("div",{className:d["error-message"],children:`${u(o)}`})]}),s.jsxs("div",{className:d["input-group"],children:[s.jsxs("label",{htmlFor:"confirm-password",children:[j("confirmPassword"),":"]}),s.jsx("input",{type:"password",id:"confirm-password",name:"confirm-password",onChange:e=>c(e.target.value),autoComplete:"new-password"}),h.length>0&&h!==o&&s.jsx("div",{className:d["error-message"],children:j("confirmPasswordError")})]}),s.jsx("button",{type:"submit",className:d["submit-button"],children:j("btnSubmit")})]})},j=()=>{const{setUser:a,setCart:i}=e.useContext(r),[u,c]=e.useState(""),[p,g]=e.useState(""),[j,x]=e.useState(!1),[b,v]=e.useState(!1),[f,N]=e.useState(""),w=t("Auth.ForgotPasswordForm")();return s.jsxs("form",{className:d["auth-form"],onSubmit:j?e=>{e.preventDefault(),v(!0),l(u,p).then((e=>{e.error?N(e.error):(a(e),n.mergeCarts(n.getLocalStorage(),e.cart).then((e=>i(e)))),v(!1)}))}:e=>{e.preventDefault(),v(!0),o(u).then((e=>{e.error?N(e.error):(c(""),x(!0),f.length>0&&N("")),v(!1)}))},children:[s.jsx("h2",{className:d.header,children:w("header")}),f.length>0&&s.jsx("div",{className:d["error-message"],children:f}),s.jsxs("div",{className:d["input-group"],children:[s.jsxs("label",{htmlFor:"email",children:[w("email"),":"]}),s.jsx("input",{type:"email",id:"email",name:"email",onChange:e=>c(e.target.value),autoComplete:"email"}),u.length>0&&!m(u)&&s.jsx("div",{className:d["error-message"],children:w("emailError")}),!j&&s.jsx("a",{className:d["shop-key-input__btn"],onClick:()=>x(!0),children:w("iHaveKey")})]}),j&&s.jsxs("div",{className:d["input-group"],children:[s.jsxs("label",{htmlFor:"email",children:[w("key"),":"]}),s.jsx("input",{id:"key",name:"key",onChange:e=>g(e.target.value)}),p.length<8&&s.jsx("div",{className:d["error-message"],children:w("keyError")})]}),s.jsx("button",{type:"submit",className:d["submit-button"],disabled:0!==h(u).length||j&&p.length<8||b,children:w(j?"loginBtn":"getKeyBtn")})]})},x=()=>{const r=t("Auth")(),[a,n]=e.useState("signIn");return s.jsxs("div",{className:d.auth,children:[(()=>{switch(a){case"signIn":default:return s.jsx(p,{});case"register":return s.jsx(g,{setCurrentForm:n});case"forgotPassword":return s.jsx(j,{})}})(),s.jsx("a",{className:d["auth-link"],onClick:()=>{n("signIn"===a?"register":"signIn")},children:r("signIn"===a?"signUp":"signIn")}),"forgotPassword"!==a&&s.jsx("a",{className:d["auth-link"],onClick:()=>n("forgotPassword"),children:r("forgotPassword")})]})},b=()=>{const{user:t}=e.useContext(r),a=c();return e.useEffect((()=>{(null==t?void 0:t._id)&&a("/")}),[t]),s.jsx(x,{})};export{b as default};
